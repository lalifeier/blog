"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[430],{9613:(e,t,p)=>{p.d(t,{Zo:()=>s,kt:()=>d});var n=p(9496);function l(e,t,p){return t in e?Object.defineProperty(e,t,{value:p,enumerable:!0,configurable:!0,writable:!0}):e[t]=p,e}function a(e,t){var p=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),p.push.apply(p,n)}return p}function r(e){for(var t=1;t<arguments.length;t++){var p=null!=arguments[t]?arguments[t]:{};t%2?a(Object(p),!0).forEach((function(t){l(e,t,p[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(p)):a(Object(p)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(p,t))}))}return e}function i(e,t){if(null==e)return{};var p,n,l=function(e,t){if(null==e)return{};var p,n,l={},a=Object.keys(e);for(n=0;n<a.length;n++)p=a[n],t.indexOf(p)>=0||(l[p]=e[p]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)p=a[n],t.indexOf(p)>=0||Object.prototype.propertyIsEnumerable.call(e,p)&&(l[p]=e[p])}return l}var o=n.createContext({}),u=function(e){var t=n.useContext(o),p=t;return e&&(p="function"==typeof e?e(t):r(r({},t),e)),p},s=function(e){var t=u(e.components);return n.createElement(o.Provider,{value:t},e.children)},h="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var p=e.components,l=e.mdxType,a=e.originalType,o=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),h=u(p),c=l,d=h["".concat(o,".").concat(c)]||h[c]||m[c]||a;return p?n.createElement(d,r(r({ref:t},s),{},{components:p})):n.createElement(d,r({ref:t},s))}));function d(e,t){var p=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var a=p.length,r=new Array(a);r[0]=c;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[h]="string"==typeof e?e:l,r[1]=i;for(var u=2;u<a;u++)r[u]=p[u];return n.createElement.apply(null,r)}return n.createElement.apply(null,p)}c.displayName="MDXCreateElement"},4434:(e,t,p)=>{p.r(t),p.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>u});var n=p(5882),l=(p(9496),p(9613));const a={},r="PHP",i={unversionedId:"devpos/development-environment/php",id:"devpos/development-environment/php",title:"PHP",description:"\u6e90\u7801\u5b89\u88c5",source:"@site/docs/devpos/development-environment/php.md",sourceDirName:"devpos/development-environment",slug:"/devpos/development-environment/php",permalink:"/blog/devpos/development-environment/php",draft:!1,editUrl:"https://github.com/lalifeier/blog/edit/main/docs/devpos/development-environment/php.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Node",permalink:"/blog/devpos/development-environment/node"},next:{title:"Python",permalink:"/blog/devpos/development-environment/python"}},o={},u=[{value:"\u6e90\u7801\u5b89\u88c5",id:"\u6e90\u7801\u5b89\u88c5",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u6765\u6e90",id:"\u6765\u6e90",level:3},{value:"Centos",id:"centos",level:2},{value:"Centos webtatic \u6e90",id:"centos-webtatic-\u6e90",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-1",level:4},{value:"\u6765\u6e90",id:"\u6765\u6e90-1",level:4},{value:"Centos Remi \u6e90",id:"centos-remi-\u6e90",level:3},{value:"\u6765\u6e90",id:"\u6765\u6e90-2",level:4},{value:"Ubuntu",id:"ubuntu",level:2},{value:"Ubuntu Ond\u0159ej Sur\xfd \u7684 PHP PPA \u6e90",id:"ubuntu-ond\u0159ej-sur\xfd-\u7684-php-ppa-\u6e90",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-2",level:4},{value:"\u6269\u5c55",id:"\u6269\u5c55",level:2},{value:"redis",id:"redis",level:3},{value:"webtatic \u6e90\u5b89\u88c5 redis",id:"webtatic-\u6e90\u5b89\u88c5-redis",level:4},{value:"\u6e90\u7801\u5b89\u88c5",id:"\u6e90\u7801\u5b89\u88c5-1",level:4},{value:"\u6765\u6e90",id:"\u6765\u6e90-3",level:4},{value:"swoole",id:"swoole",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-3",level:4},{value:"\u6765\u6e90",id:"\u6765\u6e90-4",level:4},{value:"Composer",id:"composer",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-4",level:3},{value:"\u6765\u6e90",id:"\u6765\u6e90-5",level:3},{value:"phpbrew",id:"phpbrew",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-5",level:3},{value:"\u6765\u6e90",id:"\u6765\u6e90-6",level:3}],s={toc:u};function h(e){let{components:t,...p}=e;return(0,l.kt)("wrapper",(0,n.Z)({},s,p,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"php"},"PHP"),(0,l.kt)("h2",{id:"\u6e90\u7801\u5b89\u88c5"},"\u6e90\u7801\u5b89\u88c5"),(0,l.kt)("h3",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5\u4f9d\u8d56")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install gcc gcc-c++ libxml2 libxml2-devel autoconf\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5 PHP")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"wget https://www.php.net/distributions/php-7.2.27.tar.gz\ntar -zxvf php-7.2.27.tar.gz\ncd php-7.2.27\n./configure --prefix=/usr/local/php\nmake\nmake install\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u73af\u5883\u53d8\u91cf")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"vim /etc/profile\n#\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\nPATH=$PATH:/usr/local/php/bin\nexport PATH\n#\u751f\u6548\u914d\u7f6e\nsource /etc/profile\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u8bbe\u7f6e PHP.ini")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"#\u67e5\u770bphp.ini\u76ee\u5f55\nphp -i | grep php.ini\ncp php.ini-development /usr/local/php/lib\ncd /usr/local/php/lib/\nmv php.ini-development php.ini\n")),(0,l.kt)("h3",{id:"\u6765\u6e90"},"\u6765\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.php.net/manual/zh/install.unix.php"},"https://www.php.net/manual/zh/install.unix.php")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://www.php.net/manual/zh/configure.about.php"},"https://www.php.net/manual/zh/configure.about.php"))),(0,l.kt)("h2",{id:"centos"},"Centos"),(0,l.kt)("h3",{id:"centos-webtatic-\u6e90"},"Centos webtatic \u6e90"),(0,l.kt)("h4",{id:"\u5b89\u88c5-1"},"\u5b89\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5 webtatic \u6e90")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install epel-release\nrpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5220\u9664\u5b89\u88c5\u5305")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"rpm -qa | grep webtatic\nrpm -e \u4e0a\u9762\u641c\u7d22\u5230\u7684\u5305\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5 php")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install php72w-fpm php72w-opcache\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5\u6269\u5c55\u5305")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum install php72w php72w-cli php72w-common php72w-devel php72w-embedded php72w-gd php72w-mbstring php72w-mysqlnd php72w-pdo php72w-xml\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u542f\u52a8 php-fpm")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"systemctl start php-fpm\n")),(0,l.kt)("h4",{id:"\u6765\u6e90-1"},"\u6765\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://webtatic.com/packages/php72"},"https://webtatic.com/packages/php72"))),(0,l.kt)("h3",{id:"centos-remi-\u6e90"},"Centos Remi \u6e90"),(0,l.kt)("h4",{id:"\u6765\u6e90-2"},"\u6765\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://rpms.remirepo.net/wizard"},"https://rpms.remirepo.net/wizard"))),(0,l.kt)("h2",{id:"ubuntu"},"Ubuntu"),(0,l.kt)("h3",{id:"ubuntu-ond\u0159ej-sur\xfd-\u7684-php-ppa-\u6e90"},"Ubuntu Ond\u0159ej Sur\xfd \u7684 PHP PPA \u6e90"),(0,l.kt)("h4",{id:"\u5b89\u88c5-2"},"\u5b89\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5\u8f6f\u4ef6\u6e90\u62d3\u5c55\u5de5\u5177")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get install software-properties-common\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u6dfb\u52a0 Ond\u0159ej Sur\xfd \u7684 PHP PPA \u6e90")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"sudo add-apt-repository ppa:ondrej/php\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u66f4\u65b0\u8f6f\u4ef6\u6e90\u7f13\u5b58")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get update\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5 PHP")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"#sudo apt-get install php5.6\nsudo apt-get install php7.2\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5 PHP \u6269\u5c55")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"#\u67e5\u8be2\u5bf9\u5e94\u7684\u6a21\u5757\nsudo apt-cache search php7.2\n#\u5b89\u88c5\u9700\u8981\u7684\u6a21\u5757\nsudo apt-get install php7.2-common php7.2-dev php7.2-fpm php7.2-xml php7.2-mysql php7.2-mbstring php7.2-curl php7.2-gd php7.2-opcache\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5207\u6362 PHP \u7248\u672c")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"sudo update-alternatives --config php\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7ba1\u7406 PHP")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"#\u91cd\u542f\nsystemctl restart php7.2-fpm\n#\u542f\u52a8\nsystemctl start php7.2-fpm\n#\u5173\u95ed\nsystemctl stop php7.2-fpm\n#\u68c0\u67e5\u72b6\u6001\nsystemctl status php7.2-fpm\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7981\u7528 php5.6-fpm\uff0c\u542f\u7528 php7.2-fpm\uff0c\u91cd\u542f Apache \u670d\u52a1\u751f\u6548")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"sudo a2disconf php5.6-fpm\nsudo a2enconf php7.2-fpm\nsudo service apache2 restart\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5378\u8f7d php5.6")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"sudo apt-get purge php5.6\nsudo apt-get autoremove\n")),(0,l.kt)("h2",{id:"\u6269\u5c55"},"\u6269\u5c55"),(0,l.kt)("h3",{id:"redis"},"redis"),(0,l.kt)("h4",{id:"webtatic-\u6e90\u5b89\u88c5-redis"},"webtatic \u6e90\u5b89\u88c5 redis"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"yum -y install php72w-pecl-redis\n")),(0,l.kt)("h4",{id:"\u6e90\u7801\u5b89\u88c5-1"},"\u6e90\u7801\u5b89\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5 redis \u6269\u5c55")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/phpredis/phpredis.git\ncd phpredis\nphpize\n#\u67e5\u770bphp-config\u76ee\u5f55\nfind / -name php-config\n./configure --with-php-config=/usr/bin/php-config\nmake && make install\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u914d\u7f6e php.ini\n\u7f16\u8bd1\u5b89\u88c5\u6210\u529f\u540e\uff0c\u4fee\u6539",(0,l.kt)("inlineCode",{parentName:"li"},"php.ini"),"\u52a0\u5165")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"extension = redis.so\n")),(0,l.kt)("h4",{id:"\u6765\u6e90-3"},"\u6765\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/phpredis/phpredis/blob/develop/INSTALL.markdown"},"https://github.com/phpredis/phpredis/blob/develop/INSTALL.markdown"))),(0,l.kt)("h3",{id:"swoole"},"swoole"),(0,l.kt)("h4",{id:"\u5b89\u88c5-3"},"\u5b89\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5b89\u88c5 swoole \u6269\u5c55")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"wget https://github.com/swoole/swoole-src/archive/master.tar.gz\ntar zxvf master.tar.gz\ncd swoole-src-master/\nphpize (ubuntu \u6ca1\u6709\u5b89\u88c5phpize\u53ef\u6267\u884c\u547d\u4ee4\uff1asudo apt-get install php-dev\u6765\u5b89\u88c5phpize)\n./configure\nmake\nsudo make install\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u914d\u7f6e php.ini\n\u7f16\u8bd1\u5b89\u88c5\u6210\u529f\u540e\uff0c\u4fee\u6539",(0,l.kt)("inlineCode",{parentName:"li"},"php.ini"),"\u52a0\u5165")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"extension=swoole.so\n")),(0,l.kt)("h4",{id:"\u6765\u6e90-4"},"\u6765\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://wiki.swoole.com/wiki/page/6.html"},"https://wiki.swoole.com/wiki/page/6.html"))),(0,l.kt)("h2",{id:"composer"},"Composer"),(0,l.kt)("h3",{id:"\u5b89\u88c5-4"},"\u5b89\u88c5"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Composer \u5b89\u88c5")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"curl -sS https://getcomposer.org/installer | php\nmv composer.phar /usr/local/bin/composer\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5207\u6362\u963f\u91cc\u4e91\u955c\u50cf\u955c\u50cf")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"composer config -g repo.packagist composer https://mirrors.aliyun.com/composer/\n")),(0,l.kt)("h3",{id:"\u6765\u6e90-5"},"\u6765\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://pkg.phpcomposer.com/#how-to-install-composer"},"https://pkg.phpcomposer.com/#how-to-install-composer"))),(0,l.kt)("h2",{id:"phpbrew"},"phpbrew"),(0,l.kt)("h3",{id:"\u5b89\u88c5-5"},"\u5b89\u88c5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-bash"},"# \u5b89\u88c5\u4f9d\u8d56\n# https://github.com/phpbrew/phpbrew/wiki/Requirement\n\ncurl -L -O https://github.com/phpbrew/phpbrew/releases/latest/download/phpbrew.phar\nchmod +x phpbrew.phar\n\n# Move the file to some directory within your $PATH\nsudo mv phpbrew.phar /usr/local/bin/phpbrew\nphpbrew init\n\ncat >> ~/.zshrc <<EOF\n[[ -e $HOME/.phpbrew/bashrc ]] && source $HOME/.phpbrew/bashrc\nEOF\n\n# For the first-time installation, you don't have phpbrew bash function yet.\nsource ~/.phpbrew/bashrc\n\n# \u83b7\u53d6\u7248\u672c\nphpbrew update\n# \u83b7\u53d6\u65e7\u7248\u672c\uff08\u4f4e\u4e8e 5.4\uff09\nphpbrew update --old\n\n# \u5217\u51fa\u5df2\u77e5\u7248\u672c\nphpbrew known\n# \u5217\u51fa\u5df2\u77e5\u7684\u65e7\u7248\u672c\uff08\u4f4e\u4e8e 5.4\uff09\nphpbrew known --old\n\n# List available variants\nphpbrew variants\n\n# phpbrew --debug install 7.0 +default +fpm +mysql +gd\n# phpbrew --debug install -j $(nproc) --stdout 7.0 +default +mysql +gd +fpm +soap +debug\nphpbrew --debug install -j $(nproc) --stdout 7.0 +default +gd +soap +debug\n\n# \u6e05\u7406\u6784\u5efa\u76ee\u5f55\nphpbrew clean php-7.0\n\n# \u4e34\u65f6\u5207\u6362\u7248\u672c\nphpbrew use 7.0\n# \u5207\u6362\u9ed8\u8ba4\u7248\u672c\nphpbrew switch 7.0\n# \u5207\u6362\u5230\u7cfb\u7edf\u5b89\u88c5\u7684\u7248\u672c\nphpbrew off\n\n# \u5b89\u88c5\u6269\u5c55\nphpbrew --debug ext install xdebug\nphpbrew --debug ext install gd\n")),(0,l.kt)("h3",{id:"\u6765\u6e90-6"},"\u6765\u6e90"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/phpbrew/phpbrew/wiki"},"https://github.com/phpbrew/phpbrew/wiki"))))}h.isMDXComponent=!0}}]);